<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>demo water-basic</title>
		<style type="text/css">
			* {
				box-sizing: border-box;
			}
			
			.clearfix::after {
				content: "";
				display: table-cell;
				height: 0;
				visibility: hidden;
				clear: both;
			}
			
			.clearfix {
				clear: both;
				zoom: 1;
			}
			
			.water-basic {
				position: relative;
				width: 1200px;
				margin: 0 auto;
			}
			
			.item {
				float: left;
				width: 20%;
				height: 230px;
				padding: 5px;
				transition: all 1s;
				border: 2px solid red;
				text-align: center;
				line-height: 230px;
				font-size: 40px;
			}
		</style>
		<script src="plugin/jquery191.js"></script>
	</head>

	<body>
		<div class="m" style="height: 500px;"></div>
		<div class="water-basic clearfix">
			<!--<div class="item box1">1</div>-->
		</div>
		<div class="ri-a">
			<span>2016-12-29</span>
			<span>2017-12-20</span>

		</div>

		<script type="text/javascript">
			$(function() {
				var data = {
					data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
				}

				function ajax() {
					var datas = data.data;
					var html = '';

					for(var i = 0; i < datas.length; i++) {
						html += '<div class="item">' + datas[i] + '</div>';
					}
					$('.water-basic').append($(html));
				}
				ajax()

				//判断是否滚动到到底部
				$(window).scroll(function() {　　
					var scrollTop = $(this).scrollTop();　　
					var scrollHeight = $(document).height();　　
					var windowHeight = $(this).height();　　
					if(scrollTop + windowHeight == scrollHeight) {　　　 //移动到底部了 // 加载一段数据 
						if(data.data.length > 120) { //数据到70条了不再加载 完了
							alert("没有数据可以加载啦");
							return false;
						}
						var arr = data.data.concat(data.data);
						data.data = arr; //加入一个数据数组
						ajax();　　
					}

				});

			})

			var times = [];
			$('.ri-a span').each(function() {
				times.push($(this).text());
			})

			function con(times) { //传入日期格式字符串
				var newarr = [];
				var sortTime = [];

				//转换为毫秒数
				for(var i = 0; i < times.length; i++) { //按最新输出
					newarr.push(new Date(times[i]).getTime());
				}
				//		newarr.sort(); //默认是升序排
				var m = newarr.sort(function(x, y) {
					return y - x;
				});
				//		console.log(m)
				for(var j = 0; j < newarr.length; j++) {
					var strtime = new Date(newarr[j])
					sortTime.push((strtime.getFullYear() + '-' + (strtime.getMonth() + 1) + '-' + strtime.getDate()));
				}

				return sortTime;
			}

			times = con(times)
			$('.ri-a span').each(function() {
				$(this).text(times[$(this).index()])
			})
			console.log(times)
		</script>
		<script type="text/javascript">
		</script>
	</body>

</html>